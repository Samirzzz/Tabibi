<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/Editprofile_Styling.css">
    <link rel="stylesheet" href="../css/adminn.css">

    <script>
    function Validation() {
        var email = document.getElementById('email').value.trim();
        var firstname = document.getElementById('firstname').value.trim();
        var lastname = document.getElementById('lastname').value.trim();
        var number = document.getElementById('number').value.trim();
        var currentPassword = document.getElementById('currentPassword').value.trim();
        var newPassword = document.getElementById('newPassword').value.trim();
        var confirmNewPassword = document.getElementById('confirmNewPassword').value.trim();
        
        var emailerror = document.getElementById("email-error");
        var firstnameerror = document.getElementById("firstname-error");
        var lastnameerror = document.getElementById("lastname-error");
        var numbererror = document.getElementById("number-error");
        var currentPasswordError = document.getElementById("currentPassword-error");
        var newPasswordError = document.getElementById("newPassword-error");
        var confirmNewPasswordError = document.getElementById("confirmNewPassword-error");

        emailerror.textContent = "";
        firstnameerror.textContent = "";
        lastnameerror.textContent = "";
        numbererror.textContent = "";
        currentPasswordError.textContent = "";
        newPasswordError.textContent = "";
        confirmNewPasswordError.textContent = "";

        if (number === '') {
            numbererror.textContent = "Number is required";
            return false;
        }

        if (lastname === '') {
            lastnameerror.textContent = "Last name is required";
            return false;
        }

        if (firstname === '') {
            firstnameerror.textContent = "First name is required";
            return false;
        }

        if (email === '') {
            emailerror.textContent = "Email is required";
            return false;
        }

        if (currentPassword !== '' || newPassword !== '' || confirmNewPassword !== '') {
            if (currentPassword === '') {
                currentPasswordError.textContent = "Current password is required";
                return false;
            }

            if (newPassword === '') {
                newPasswordError.textContent = "New password is required";
                return false;
            }

            if (confirmNewPassword === '') {
                confirmNewPasswordError.textContent = "Confirm new password is required";
                return false;
            }

            if (newPassword !== confirmNewPassword) {
                confirmNewPasswordError.textContent = "New password and confirm new password do not match";
                return false;
            }
            if (newPassword.size()<8) {
                newPassword.textContent = "New password length should be more than 8";
                return false;
            }
        }

        return true;
    }
    </script>
</head>
<body>
    <div th:include="navigation"></div>
    <div class="container">
        <h1>Edit Profile</h1>

        <form id="userForm" th:action="@{/Doctor/EditProfile}" method="post" onsubmit="return Validation()">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" class="form-control" id="email" name="email" th:value="${email}">
                <span class="error-message" id="email-error"></span>
            </div>
            <div class="form-group">
                <label for="firstname">First Name</label>
                <input type="text" class="form-control" id="firstname" name="firstname" th:value="${firstname}">
                <span class="error-message" id="firstname-error"></span>
            </div>
            <div class="form-group">
                <label for="lastname">Last Name</label>
                <input type="text" class="form-control" id="lastname" name="lastname" th:value="${lastname}">
                <span class="error-message" id="lastname-error"></span>
            </div>
            <div class="form-group">
                <label for="number">Phone</label>
                <input type="tel" class="form-control" id="number" name="number" th:value="${number}">
                <span class="error-message" id="number-error"></span>
            </div>
            <div class="form-group">
                <label for="specialization">Specialization</label>
                <input type="text" class="form-control" id="specialization" name="specialization" th:value="${specialization}">
                <span class="error-message" id="specialization-error"></span>
            </div>
            <div class="form-group">
                <label for="education">Education</label>
                <input type="text" class="form-control" id="education" name="education" th:value="${education}">
                <span class="error-message" id="education-error"></span>
            </div>
            <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <input type="password" class="form-control" id="currentPassword" name="currentPassword">
                <span class="error-message" id="currentPassword-error"></span>
            </div>
            <div class="form-group">
                <label for="newPassword">New Password</label>
                <input type="password" class="form-control" id="newPassword" name="newPassword">
                <span class="error-message" id="newPassword-error"></span>
            </div>
            <div class="form-group">
                <label for="confirmNewPassword">Confirm New Password</label>
                <input type="password" class="form-control" id="confirmNewPassword" name="confirmNewPassword">
                <span class="error-message" id="confirmNewPassword-error"></span>
            </div>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
    </div>
</body>
</html>
